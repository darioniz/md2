{"version":3,"file":"block-scroll-strategy.js","sourceRoot":"","sources":["../../../../../src/lib/core/overlay/scroll/block-scroll-strategy.ts"],"names":[],"mappings":"AAGA;;GAEG;AACH;IAKE,6BAAoB,cAA6B;QAA7B,mBAAc,GAAd,cAAc,CAAe;QAJzC,wBAAmB,GAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC;QAErD,eAAU,GAAG,KAAK,CAAC;IAE0B,CAAC;IAEtD,oCAAM,GAAN,cAAW,CAAC;IAEZ,oCAAM,GAAN;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC;YACzB,IAAM,IAAI,GAAG,QAAQ,CAAC,eAAe,CAAC;YAEtC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,cAAc,CAAC,yBAAyB,EAAE,CAAC;YAE/E,kEAAkE;YAClE,IAAI,CAAC,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC;YAChD,IAAI,CAAC,mBAAmB,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;YAE9C,mFAAmF;YACnF,gFAAgF;YAChF,IAAI,CAAC,KAAK,CAAC,IAAI,GAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,OAAI,CAAC;YAC5D,IAAI,CAAC,KAAK,CAAC,GAAG,GAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,GAAG,OAAI,CAAC;YAC1D,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;YAC7C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;QACzB,CAAC;IACH,CAAC;IAED,qCAAO,GAAP;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YACxB,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC;YACpE,QAAQ,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,mBAAmB,CAAC,GAAG,CAAC;YAClE,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,CAAC,wBAAwB,CAAC,CAAC;YACpE,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,uBAAuB,CAAC,GAAG,CAAC,CAAC;QACrF,CAAC;IACH,CAAC;IAEO,2CAAa,GAArB;QACE,qFAAqF;QACrF,8EAA8E;QAC9E,4BAA4B;QAC5B,EAAE,CAAC,CAAC,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC,QAAQ,CAAC,wBAAwB,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC7F,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,IAAM,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;QAC3B,IAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,KAAK,CAAC;IAClF,CAAC;IACH,0BAAC;AAAD,CAAC,AAlDD,IAkDC","sourcesContent":["import {ScrollStrategy} from './scroll-strategy';\r\nimport {ViewportRuler} from '../position/viewport-ruler';\r\n\r\n/**\r\n * Strategy that will prevent the user from scrolling while the overlay is visible.\r\n */\r\nexport class BlockScrollStrategy implements ScrollStrategy {\r\n  private _previousHTMLStyles: any = { top: null, left: null };\r\n  private _previousScrollPosition: { top: number, left: number };\r\n  private _isEnabled = false;\r\n\r\n  constructor(private _viewportRuler: ViewportRuler) { }\r\n\r\n  attach() { }\r\n\r\n  enable() {\r\n    if (this._canBeEnabled()) {\r\n      const root = document.documentElement;\r\n\r\n      this._previousScrollPosition = this._viewportRuler.getViewportScrollPosition();\r\n\r\n      // Cache the previous inline styles in case the user had set them.\r\n      this._previousHTMLStyles.left = root.style.left;\r\n      this._previousHTMLStyles.top = root.style.top;\r\n\r\n      // Note: we're using the `html` node, instead of the `body`, because the `body` may\r\n      // have the user agent margin, whereas the `html` is guaranteed not to have one.\r\n      root.style.left = `${-this._previousScrollPosition.left}px`;\r\n      root.style.top = `${-this._previousScrollPosition.top}px`;\r\n      root.classList.add('cdk-global-scrollblock');\r\n      this._isEnabled = true;\r\n    }\r\n  }\r\n\r\n  disable() {\r\n    if (this._isEnabled) {\r\n      this._isEnabled = false;\r\n      document.documentElement.style.left = this._previousHTMLStyles.left;\r\n      document.documentElement.style.top = this._previousHTMLStyles.top;\r\n      document.documentElement.classList.remove('cdk-global-scrollblock');\r\n      window.scroll(this._previousScrollPosition.left, this._previousScrollPosition.top);\r\n    }\r\n  }\r\n\r\n  private _canBeEnabled(): boolean {\r\n    // Since the scroll strategies can't be singletons, we have to use a global CSS class\r\n    // (`cdk-global-scrollblock`) to make sure that we don't try to disable global\r\n    // scrolling multiple times.\r\n    if (document.documentElement.classList.contains('cdk-global-scrollblock') || this._isEnabled) {\r\n      return false;\r\n    }\r\n\r\n    const body = document.body;\r\n    const viewport = this._viewportRuler.getViewportRect();\r\n    return body.scrollHeight > viewport.height || body.scrollWidth > viewport.width;\r\n  }\r\n}\r\n"]}